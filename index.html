<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Plan de Estudios ¬∑ Carrera de Derecho 157-1</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
/* ========= TEMA ========= */
:root{
  --bg-0:#0e1122; --bg-1:#141935;
  --panel:rgba(255,255,255,.06); --panel-b:rgba(255,255,255,.10);
  --txt:#e9eef9; --muted:#a6afc1; --line:#2a3350;

  /* Colores por A√ëO (franja de sigla) */
  --y1a:#4fd1a5; --y1b:#2bb382;   /* 1¬∫ verdoso */
  --y2a:#f6a66c; --y2b:#ff8a3d;   /* 2¬∫ naranja */
  --y3a:#6aa8ff; --y3b:#4c7df7;   /* 3¬∫ azul */
  --y4a:#c58bff; --y4b:#9c69f5;   /* 4¬∫ violeta */
  --y5a:#ffc85f; --y5b:#ff9c3b;   /* 5¬∫ √°mbar */

  --strike:#c62f2f;   /* tachado */
  --locked:.45;       /* opacidad bloqueado */
}

*{box-sizing:border-box}
html,body{height:100%}
html,body{
  background:
    radial-gradient(1100px 780px at 80% -12%, #2c2e58 0%, transparent 60%),
    radial-gradient(950px 700px at -10% 82%, #1a6b52 0%, transparent 55%),
    linear-gradient(180deg, var(--bg-0), var(--bg-1));
  color:var(--txt);
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
}

/* ===== HERO / ENCABEZADO ===== */
.hero{
  position:sticky; top:0; z-index:20;
  background:
    linear-gradient(135deg, rgba(106,168,255,.18), rgba(197,139,255,.12)),
    linear-gradient(180deg, rgba(20,25,53,.98), rgba(20,25,53,.85));
  border-bottom:1px solid var(--line);
  backdrop-filter:saturate(130%) blur(8px);
}
.hero-inner{max-width:1100px;margin:0 auto;padding:1rem .9rem}
.kicker{letter-spacing:.25em;text-transform:uppercase;font-size:.75rem;color:var(--muted)}
.title{margin:.25rem 0 .2rem;font-weight:800;font-size:clamp(1.1rem,4.6vw,2rem)}
.divider{height:3px;margin:.8rem 0 0;background:linear-gradient(90deg,var(--y3a),var(--y4b),var(--y5a));border-radius:2px}

/* Topbar usuario */
.topbar{display:flex;align-items:center;justify-content:space-between;gap:.8rem;
  max-width:1100px;margin:.45rem auto .7rem;padding:0 .9rem}
.badge{
  display:inline-flex;gap:.5rem;align-items:center;font-size:.85rem;color:#d5e1ff;
  background:#0f1520;border:1px solid var(--line);padding:.45rem .6rem;border-radius:.6rem
}
.btn{appearance:none;border:0;border-radius:.6rem;padding:.55rem .85rem;cursor:pointer;
  background:linear-gradient(135deg,#6aa8ff,#9b7afb);color:#fff;font-weight:800}
.btn:hover{filter:brightness(1.06)}

/* ===== OVERLAY LOGIN ===== */
.overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.65);z-index:99}
.card{
  width:min(92vw,520px);background:var(--panel);border:1px solid var(--line);
  border-radius:1rem;padding:1rem .9rem 1.1rem;box-shadow:0 24px 80px rgba(0,0,0,.45)
}
.card h2{margin:.4rem 0 1rem;text-align:center;font-size:1rem;color:#d7e4ff}
label{display:block;font-size:.92rem;color:var(--muted);margin:.45rem 0 .25rem}
input{
  width:100%;padding:.8rem .9rem;border-radius:.7rem;border:1px solid var(--line);
  background:#0f1520;color:#fff;outline:none
}
input:focus{border-color:#6aa8ff}
.action{margin-top:.8rem}

/* ===== LAYOUT A√ëOS ===== */
.main{max-width:1100px;margin:0 auto;padding:1rem .9rem 3rem}
.year{background:var(--panel);border:1px solid var(--line);border-radius:1rem;padding:.9rem;margin:.9rem 0}
.year h3{text-align:center;margin:.15rem 0 .8rem;letter-spacing:.4px;color:#fff;font-size:1rem}

/* Grid (mobile-first) */
.grid{display:grid;gap:.65rem;grid-template-columns:repeat(2,minmax(0,1fr))}
@media (min-width:640px){.grid{grid-template-columns:repeat(3,1fr)}}
@media (min-width:960px){.grid{grid-template-columns:repeat(4,1fr)}}

/* ===== TILE ===== */
.tile{
  position:relative;overflow:hidden;border-radius:.9rem;user-select:none;cursor:pointer;
  background:#101522;border:1px solid rgba(255,255,255,.08);
  display:grid;grid-template-rows:auto 1fr;min-height:122px;
  box-shadow:0 10px 28px rgba(0,0,0,.22);transition:transform .08s ease, box-shadow .2s ease
}
.tile:hover{transform:translateY(-2px);box-shadow:0 16px 34px rgba(0,0,0,.28)}
.tile.locked{cursor:not-allowed;opacity:var(--locked);filter:saturate(.75) contrast(.9)}
.tile.locked:hover{transform:none;box-shadow:0 10px 28px rgba(0,0,0,.22)}

/* Franja sigla (arriba) */
.tile .code{
  display:block;text-align:center;font-weight:800;color:#061019;letter-spacing:.3px;
  padding:.38rem .5rem;background:rgba(255,255,255,.86);box-shadow:inset 0 -1px 0 rgba(0,0,0,.08);
  font-size:.88rem
}
/* Colores por a√±o */
.tile.year-1 .code{background:linear-gradient(180deg,var(--y1a),var(--y1b))}
.tile.year-2 .code{background:linear-gradient(180deg,var(--y2a),var(--y2b))}
.tile.year-3 .code{background:linear-gradient(180deg,var(--y3a),var(--y3b))}
.tile.year-4 .code{background:linear-gradient(180deg,var(--y4a),var(--y4b))}
.tile.year-5 .code{background:linear-gradient(180deg,var(--y5a),var(--y5b))}

/* Cuerpo (nombre) */
.name{
  display:grid;place-items:center;padding:.75rem .6rem;text-align:center;
  color:#041018;font-weight:800;line-height:1.15;font-size:.98rem;
  background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08))
}

/* Cr√©ditos (abajo-derecha) */
.credits{
  position:absolute;right:8px;bottom:8px;display:inline-block;
  padding:.26rem .55rem;border-radius:.65rem;font-weight:800;font-size:.78rem;line-height:1;
  color:#e7f7ff;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22)
}

/* Aprobada + tachado fino */
.tile.approved .name,.tile.approved .code{filter:brightness(1.12)}
.tile.approved::after{
  content:"";position:absolute;left:8%;right:8%;top:50%;height:2.5px;border-radius:2px;
  background:linear-gradient(90deg,transparent,var(--strike),transparent);
  transform:rotate(-18deg);opacity:.98;pointer-events:none
}

/* Modal Felicidades */
.modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55);z-index:98}
.modal.show{display:grid}
.modal .paper{
  width:min(92vw,520px);text-align:center;background:var(--panel);
  border:1px solid var(--line);border-radius:1rem;padding:1rem 1.1rem;
  box-shadow:0 24px 80px rgba(0,0,0,.45);font-weight:800;letter-spacing:.2px
}

/* Util */
.hidden{display:none!important}
</style>
</head>
<body>

<!-- HERO -->
<header class="hero">
  <div class="hero-inner">
    <div class="kicker">UAGRM ¬∑ FACULTAD DE CIENCIAS JUR√çDICAS</div>
    <div class="title">PLAN DE ESTUDIOS ¬∑ CARRERA DE DERECHO 157-1</div>
    <div class="divider"></div>
  </div>
  <div class="topbar">
    <div class="badge" id="userBadge">Estudiante: ‚Äî ¬∑ Registro: ‚Äî</div>
    <button class="btn" id="resetBtn" type="button">Reiniciar progreso</button>
  </div>
</header>

<main class="main">
  <section class="year"><h3>Primer A√±o</h3><div class="grid" data-year="1"></div></section>
  <section class="year"><h3>Segundo A√±o</h3><div class="grid" data-year="2"></div></section>
  <section class="year"><h3>Tercer A√±o</h3><div class="grid" data-year="3"></div></section>
  <section class="year"><h3>Cuarto A√±o</h3><div class="grid" data-year="4"></div></section>
  <section class="year"><h3>Quinto A√±o</h3><div class="grid" data-year="5"></div></section>
</main>

<!-- LOGIN -->
<div class="overlay" id="login">
  <div class="card">
    <h2>FACULTAD DE CIENCIAS JUR√çDICAS, POL√çTICAS, SOCIALES Y RELACIONES INTERNACIONALES</h2>
    <label>Estudiante</label>
    <input id="inName" type="text" placeholder="Nombre completo" />
    <label>Registro</label>
    <input id="inReg" type="text" placeholder="N√∫mero de registro" />
    <div class="action">
      <button class="btn" id="startBtn" type="button">Comenzar</button>
    </div>
  </div>
</div>

<!-- MODAL FELICIDADES -->
<div class="modal" id="congrats">
  <div class="paper">üéâ ¬°FELICIDADES! Has aprobado toda la malla curricular.</div>
</div>

<script>
/* ========== DATA ‚Äî DERECHO 157-1 ========== */
/* Cr√©ditos por materia (si falta alguna, toma 6 por defecto) */
const CREDITS = {
  DER100:8, DER101:8, DER102:6, DER103:6, DER104:8, DER105:6, DER106:6, DER107:8,
  DER200:6, DER201:6, DER202:6, DER203:6, DER204:6, DER205:6, DER206:6, DER207:6,
  DER300:6, DER301:6, DER302:6, DER303:8, DER304:10, DER305:6, DER306:10,
  DER400:6, DER401:8, DER402:6, DER403:8, DER404:6, DER405:6, DER406:8, DER407:8,
  DER500:6, DER501:6, DER502:8, DER503:8, DER504:6, DER505:6, DER506:6
};

/* Plan con prerrequisitos (DER404 s√≥lo DER202; DER505 requiere 404,305,406) */
const COURSES = [
  // 1¬∫
  {id:'DER100', name:'Introducci√≥n al Derecho', year:1, prereq:[]},
  {id:'DER101', name:'Derecho Romano e Historia del Derecho Boliviano', year:1, prereq:[]},
  {id:'DER102', name:'Sociolog√≠a General y Jur√≠dica', year:1, prereq:[]},
  {id:'DER103', name:'Ciencia Pol√≠tica e Historia del Pensamiento Pol√≠tico', year:1, prereq:[]},
  {id:'DER104', name:'Derecho Civil I y II (Personas y Derechos Reales)', year:1, prereq:[]},
  {id:'DER105', name:'Econom√≠a Pol√≠tica', year:1, prereq:[]},
  {id:'DER106', name:'Filosof√≠a General y del Derecho', year:1, prereq:[]},
  {id:'DER107', name:'Metodolog√≠a de la Investigaci√≥n Social y Jur√≠dica', year:1, prereq:[]},
  // 2¬∫
  {id:'DER200', name:'Derecho Constitucional y Procedimientos Constitucionales', year:2, prereq:['DER100','DER101','DER102','DER103']},
  {id:'DER201', name:'Derechos Humanos, su Procedimiento y Derecho Ind√≠gena', year:2, prereq:['DER100']},
  {id:'DER202', name:'Derecho Administrativo y su Procedimiento', year:2, prereq:['DER100']},
  {id:'DER203', name:'Derecho Civil III (Obligaciones)', year:2, prereq:['DER104']},
  {id:'DER204', name:'Medicina Legal', year:2, prereq:['DER104']},
  {id:'DER205', name:'Derecho Penal I', year:2, prereq:['DER105']},
  {id:'DER206', name:'Criminolog√≠a', year:2, prereq:['DER105']},
  {id:'DER207', name:'Ley del √ìrgano Judicial, √âtica y Taller de Expresi√≥n', year:2, prereq:['DER106']},
  // 3¬∫
  {id:'DER300', name:'Derecho Laboral, su Procedimiento y Pr√°ctica Forense', year:3, prereq:['DER200']},
  {id:'DER301', name:'Derecho Financiero, Tributario y Aduanero y su Procedimiento', year:3, prereq:['DER105']},
  {id:'DER302', name:'Derecho del Medio Ambiente y su Procedimiento', year:3, prereq:['DER202']},
  {id:'DER303', name:'Derecho Civil IV (Contratos)', year:3, prereq:['DER203']},
  {id:'DER304', name:'Derecho Procesal Civil y Pr√°ctica Forense', year:3, prereq:['DER203']},
  {id:'DER305', name:'Derecho Penal II', year:3, prereq:['DER205']},
  {id:'DER306', name:'Derecho Procesal Penal y Pr√°ctica Forense', year:3, prereq:['DER205']},
  // 4¬∫
  {id:'DER400', name:'Derecho a la Seguridad Social, Procedimiento y Pr√°ctica Forense', year:4, prereq:['DER300']},
  {id:'DER401', name:'Derecho Comercial y Empresarial', year:4, prereq:['DER301']},
  {id:'DER402', name:'Derecho Agrario y Procedimiento Administrativo Agrario', year:4, prereq:['DER302']},
  {id:'DER403', name:'Derecho Civil V (Sucesiones)', year:4, prereq:['DER303']},
  {id:'DER404', name:'Derecho Bancario, Burs√°til y Cooperativo', year:4, prereq:['DER202']},  // correcci√≥n
  {id:'DER405', name:'Derecho Inform√°tico', year:4, prereq:['DER304']},
  {id:'DER406', name:'Derecho Internacional P√∫blico y Privado', year:4, prereq:['DER305','DER306']},
  {id:'DER407', name:'Metodolog√≠a y Taller de Tesis', year:4, prereq:['DER107']},
  // 5¬∫
  {id:'DER500', name:'Derecho Auton√≥mico y Municipal', year:5, prereq:['DER202']},
  {id:'DER501', name:'Derecho Procesal Agrario y su Proceso Oral', year:5, prereq:['DER402']},
  {id:'DER502', name:'Derecho Minero y Petrolero', year:5, prereq:['DER302']},
  {id:'DER503', name:'Derecho de Familia, Ni√±ez, Adolescencia y Violencia', year:5, prereq:['DER403']},
  {id:'DER504', name:'Taller y Pr√°ctica Forense Civil', year:5, prereq:['DER303']},
  {id:'DER505', name:'Taller y Pr√°ctica Forense Penal y Sistema Penitenciario', year:5, prereq:['DER404','DER305','DER406']},
  {id:'DER506', name:'M√©todos Alternativos de Resoluci√≥n de Conflictos', year:5, prereq:['DER407']}
];

/* ===== Estado y persistencia ===== */
const $ = s => document.querySelector(s);
const $$ = s => [...document.querySelectorAll(s)];
let COMPLETED = new Set();
let STORAGE_KEY = ""; // malla_derecho_1571_<registro>
const CHILDREN = {};  // padre -> [hijos]

// Grafo de dependencias
COURSES.forEach(c => c.prereq.forEach(p => (CHILDREN[p] ??= []).push(c.id)));

function getCredits(id){ return CREDITS[id] ?? 6; }

/* ===== Render ===== */
function renderAll(){
  $$(".grid").forEach(g => g.innerHTML = "");
  COURSES.forEach(c => {
    const grid = document.querySelector(`.grid[data-year="${c.year}"]`);
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.dataset.id = c.id;
    tile.classList.add(`year-${c.year}`);

    const done = COMPLETED.has(c.id);
    const unlocked = done || c.prereq.every(p => COMPLETED.has(p));
    if (done) tile.classList.add("approved");
    if (!unlocked) tile.classList.add("locked");

    tile.innerHTML = `
      <span class="code">${c.id}</span>
      <div class="name">${c.name}</div>
      <span class="credits">${getCredits(c.id)} cr</span>
    `;

    tile.addEventListener("click", () => {
      if (tile.classList.contains("locked")) return;

      if (COMPLETED.has(c.id)) {
        COMPLETED.delete(c.id);
        unapproveCascade(c.id);
      } else {
        COMPLETED.add(c.id);
      }
      save();
      renderAll();
      if (COURSES.every(x => COMPLETED.has(x.id))) showCongrats();
    });

    grid.appendChild(tile);
  });
}

/* Cascada al desmarcar */
function unapproveCascade(root){
  const stack = [root];
  const seen = new Set();
  while(stack.length){
    const cur = stack.pop();
    if (seen.has(cur)) continue;
    seen.add(cur);
    (CHILDREN[cur] || []).forEach(ch => {
      if (COMPLETED.has(ch)) {
        COMPLETED.delete(ch);
        stack.push(ch);
      }
    });
  }
}

/* Persistencia */
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify([...COMPLETED])); }
function load(){
  const raw = localStorage.getItem(STORAGE_KEY);
  COMPLETED = new Set(raw ? JSON.parse(raw) : []);
}

/* Login + acciones */
document.addEventListener("DOMContentLoaded", () => {
  $("#congrats").classList.remove("show");

  $("#startBtn").addEventListener("click", () => {
    const name = $("#inName").value.trim();
    const reg  = $("#inReg").value.trim();
    if (!name || !reg) { alert("Complet√° Estudiante y Registro"); return; }
    STORAGE_KEY = `malla_derecho_1571_${reg}`;
    load();
    $("#login").classList.add("hidden");
    $("#userBadge").textContent = `Estudiante: ${name} ¬∑ Registro: ${reg}`;
    renderAll();
  });

  $("#resetBtn").addEventListener("click", () => {
    if (!STORAGE_KEY) return;
    if (confirm("¬øBorrar todo tu progreso guardado?")) {
      localStorage.removeItem(STORAGE_KEY);
      COMPLETED.clear();
      renderAll();
    }
  });
});

/* Modal Felicidades */
function showCongrats(){
  const m = $("#congrats");
  m.classList.add("show");
  setTimeout(() => m.classList.remove("show"), 5000);
}
</script>
</body>
</html>

